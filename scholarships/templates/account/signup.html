{% extends "base.html" %}
{% comment %} 
{% load widget_tweaks %}
{% block content %}
    {% element h1 %}
        Sign up
    {% endelement %}
    {% setvar link %}
        <a href="{{ login_url }}">
        {% endsetvar %}
        {% setvar end_link %}
        </a>
    {% endsetvar %}
    {% element p %}
        {% blocktranslate %}Already have an account? Then please {{ link }}sign in{{ end_link }}.{% endblocktranslate %}
    {% endelement %}
    {% if not SOCIALACCOUNT_ONLY %}
        {% url 'account_signup' as action_url %}
        {% element form form=form method="post" action=action_url tags="entrance,signup" %}
            {% csrf_token %}
            {% slot body %}
                
                {{ form.non_field_errors | safe }}
                <input type='hidden' name='remember' value='true'/>
                <div>
                    <div>
                        {{ form.username.errors | safe}}
                        <label for="username" class="sr-only">Username</label>
                        
                        {% render_field form.username %}
                    </div>
                    <div>
                        {{ form.email.errors | safe }}
                        <label for="email" class="sr-only">Email</label>
                        
                        {% render_field form.email%}
                    </div>
                    <div>
                        {{ form.password1.errors | safe }}
                        <label for="password1" class="sr-only">Password</label>
                       
                        {% render_field form.password1 %}
                    </div>
                    <div>
                        {{ form.password2.errors | safe }}
                        <label for="password2" class="sr-only">Password</label>
                       
                        {% render_field form.password2 %}
                    </div>
                </div>
                {% endelement %}
                {{ redirect_field }}
            {% endslot %}
            {% slot actions %}
                {% element button tags="prominent,signup" type="submit" %}
                    {% trans "Sign Up" %}
                {% endelement %}
            {% endslot %}
        {% endelement %}
    {% endif %}
    {% if PASSKEY_SIGNUP_ENABLED %}
        {% element hr %}
        {% endelement %}
        {% element button href=signup_by_passkey_url tags="prominent,signup,outline,primary" %}
            {% trans "Sign up using a passkey" %}
        {% endelement %}
    {% endif %}
    {% if SOCIALACCOUNT_ENABLED %}
        {% include "socialaccount/snippets/login.html" with page_layout="entrance" %}
    {% endif %}
{% endblock content %} {% endcomment %}
{% comment %} {% extends "base.html" %} {% endcomment %}
{% load widget_tweaks %}

{% block extra_css %}
<style>
    /* Dark theme base */
    .signup-container {
        background: #0f172a;
        color: #e2e8f0;
        min-height: 100vh;
        padding: 2rem;
        animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Typography */
    .signup-header {
        font-size: 2.5rem;
        font-weight: 300;
        color: #f8fafc;
        margin-bottom: 1rem;
        animation: slideUp 0.6s ease-out 0.2s both;
    }

    .signup-link {
        color: #94a3b8;
        margin-bottom: 2rem;
        animation: slideUp 0.6s ease-out 0.4s both;
    }

    .signup-link a {
        color: #60a5fa;
        text-decoration: none;
        transition: color 0.3s ease;
    }

    .signup-link a:hover {
        color: #93c5fd;
    }

    /* Form styling */
    .form-container {
        max-width: 400px;
        margin: 0 auto;
        animation: slideUp 0.6s ease-out 0.6s both;
    }

    .form-field {
        margin-bottom: 1.5rem;
        opacity: 0;
        animation: slideUp 0.5s ease-out both;
    }

    .form-field:nth-child(1) { animation-delay: 0.8s; }
    .form-field:nth-child(2) { animation-delay: 0.9s; }
    .form-field:nth-child(3) { animation-delay: 1.0s; }
    .form-field:nth-child(4) { animation-delay: 1.1s; }

    /* Input fields */
    .enhanced-input {
        position: relative;
    }

    .enhanced-input input {
        width: 100%;
        padding: 1rem;
        background: #1e293b;
        border: 1px solid #334155;
        border-radius: 8px;
        color: #e2e8f0;
        font-size: 1rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        outline: none;
    }

    .enhanced-input input::placeholder {
        color: #64748b;
    }

    .enhanced-input input:focus {
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        transform: translateY(-1px);
    }

    .enhanced-input input:hover:not(:focus) {
        border-color: #475569;
    }

    /* Labels */
    .enhanced-input label {
        display: block;
        margin-bottom: 0.5rem;
        color: #cbd5e1;
        font-weight: 500;
        font-size: 0.875rem;
        transition: color 0.3s ease;
    }

    .enhanced-input input:focus + label,
    .enhanced-input:focus-within label {
        color: #60a5fa;
    }

    /* Error styling */
    .enhanced-input.error input {
        border-color: #ef4444;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
    }

    .error-message {
        color: #fca5a5;
        font-size: 0.875rem;
        margin-top: 0.5rem;
        opacity: 0;
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .error-message:not(:empty) {
        opacity: 1;
        max-height: 100px;
    }

    /* Submit button */
    .submit-button {
        width: 100%;
        padding: 1rem;
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        animation: slideUp 0.5s ease-out 1.2s both;
    }

    .submit-button:hover {
        background: linear-gradient(135deg, #2563eb, #1e40af);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
    }

    .submit-button:active {
        transform: translateY(0);
    }

    .submit-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transition: left 0.6s ease;
    }

    .submit-button:hover::before {
        left: 100%;
    }

    /* Divider */
    .divider {
        margin: 2rem 0;
        border: none;
        height: 1px;
        background: linear-gradient(90deg, transparent, #334155, transparent);
        animation: slideUp 0.5s ease-out 1.3s both;
    }

    /* Social login styling */
    .social-section {
        animation: slideUp 0.5s ease-out 1.4s both;
    }

    .social-button {
        display: inline-block;
        width: 100%;
        padding: 0.875rem;
        background: #1e293b;
        color: #e2e8f0;
        text-decoration: none;
        border: 1px solid #334155;
        border-radius: 8px;
        text-align: center;
        font-weight: 500;
        transition: all 0.3s ease;
    }

    .social-button:hover {
        background: #334155;
        border-color: #475569;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    /* Responsive design */
    @media (max-width: 768px) {
        .signup-container {
            padding: 1rem;
        }
        
        .signup-header {
            font-size: 2rem;
        }
        
        .form-container {
            max-width: 100%;
        }
    }

    /* Focus states for accessibility */
    *:focus {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
    }

    /* Smooth transitions for all interactive elements */
    a, button, input, select, textarea {
        transition: all 0.3s ease;
    }
</style>
{% endblock %}

{% block content %}
<div class="signup-container">
    <div class="form-container">
        {% element h1 class="signup-header" %}
            Sign up
        {% endelement %}
        
        {% setvar link %}
            <a href="{{ login_url }}">
        {% endsetvar %}
        {% setvar end_link %}
            </a>
        {% endsetvar %}
        
        {% element p class="signup-link" %}
            {% blocktranslate %}Already have an account? Then please {{ link }}sign in{{ end_link }}.{% endblocktranslate %}
        {% endelement %}
        
        {% if not SOCIALACCOUNT_ONLY %}
            {% url 'account_signup' as action_url %}
            {% element form form=form method="post" action=action_url tags="entrance,signup" %}
                {% csrf_token %}
                {% slot body %}
                    
                    <div class="error-message">
                        {{ form.non_field_errors | safe }}
                    </div>
                    
                    <input type='hidden' name='remember' value='true'/>
                    
                    <div class="form-field enhanced-input">
                        <label for="{{ form.username.id_for_label }}">Username</label>
                        {% render_field form.username placeholder="Enter your username" %}
                        <div class="error-message">
                            {{ form.username.errors | safe}}
                        </div>
                    </div>
                    
                    <div class="form-field enhanced-input">
                        <label for="{{ form.email.id_for_label }}">Email</label>
                        {% render_field form.email placeholder="Enter your email" %}
                        <div class="error-message">
                            {{ form.email.errors | safe }}
                        </div>
                    </div>
                    
                    <div class="form-field enhanced-input">
                        <label for="{{ form.password1.id_for_label }}">Password</label>
                        {% render_field form.password1 placeholder="Enter your password" %}
                        <div class="error-message">
                            {{ form.password1.errors | safe }}
                        </div>
                    </div>
                    
                    <div class="form-field enhanced-input">
                        <label for="{{ form.password2.id_for_label }}">Confirm Password</label>
                        {% render_field form.password2 placeholder="Confirm your password" %}
                        <div class="error-message">
                            {{ form.password2.errors | safe }}
                        </div>
                    </div>
                    
                    {{ redirect_field }}
                {% endslot %}
                
                {% slot actions %}
                    {% element button tags="prominent,signup" type="submit" class="submit-button" %}
                        {% trans "Sign Up" %}
                    {% endelement %}
                {% endslot %}
            {% endelement %}
        {% endif %}
        
        {% if PASSKEY_SIGNUP_ENABLED %}
            {% element hr class="divider" %}
            {% endelement %}
            <div class="social-section">
                {% element button href=signup_by_passkey_url tags="prominent,signup,outline,primary" class="social-button" %}
                    {% trans "Sign up using a passkey" %}
                {% endelement %}
            </div>
        {% endif %}
        
        {% if SOCIALACCOUNT_ENABLED %}
            {% element hr class="divider" %}
            {% endelement %}
            <div class="social-section">
                {% include "socialaccount/snippets/login.html" with page_layout="entrance" %}
            </div>
        {% endif %}
    </div>
</div>
{% endblock content %}